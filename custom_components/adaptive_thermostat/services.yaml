set_preset_temp:
  name: Set preset modes temperature
  description: Sets the temperature for the preset modes.
  target:
    entity:
      integration: adaptive_thermostat
      domain: climate
  fields:
    away_temp:
      name: Away
      description: Away mode temperature
      required: false
      advanced: false
      example: 14.0
      selector:
        number:
          min: 0
          max: 95
          step: 0.1
          mode: slider
    eco_temp:
      name: Eco
      description: Eco mode temperature
      required: false
      advanced: false
      example: 17.5
      selector:
        number:
          min: 0
          max: 95
          step: 0.1
          mode: slider
    boost_temp:
      name: Boost
      description: Boost mode temperature
      required: false
      advanced: false
      example: 22.0
      selector:
        number:
          min: 0
          max: 95
          step: 0.1
          mode: slider
    comfort_temp:
      name: Comfort
      description: Comfort mode temperature
      required: false
      advanced: false
      example: 21.0
      selector:
        number:
          min: 0
          max: 95
          step: 0.1
          mode: slider
    home_temp:
      name: Home
      description: Home mode temperature
      required: false
      advanced: false
      example: 19.0
      selector:
        number:
          min: 0
          max: 95
          step: 0.1
          mode: slider
    sleep_temp:
      name: Sleep
      description: Sleep mode temperature
      required: false
      advanced: false
      example: 18.5
      selector:
        number:
          min: 0
          max: 95
          step: 0.1
          mode: slider
    activity_temp:
      name: Activity
      description: Activity mode temperature
      required: false
      advanced: false
      example: 20.0
      selector:
        number:
          min: 0
          max: 95
          step: 0.1
          mode: slider
    away_temp_disable:
      name: Disable away
      description: Disable the away mode temperature
      required: false
      advanced: false
      example: true
      selector:
        boolean:
    eco_temp_disable:
      name: Disable eco
      description: Disable the eco mode temperature
      required: false
      advanced: false
      example: true
      selector:
        boolean:
    boost_temp_disable:
      name: Disable boost
      description: Disable the boost mode temperature
      required: false
      advanced: false
      example: true
      selector:
        boolean:
    comfort_temp_disable:
      name: Disable comfort
      description: Disable the comfort mode temperature
      required: false
      advanced: false
      example: true
      selector:
        boolean:
    home_temp_disable:
      name: Disable home
      description: Disable the home mode temperature
      required: false
      advanced: false
      example: true
      selector:
        boolean:
    sleep_temp_disable:
      name: Disable sleep
      description: Disable the sleep mode temperature
      required: false
      advanced: false
      example: true
      selector:
        boolean:
    activity_temp_disable:
      name: Disable activity
      description: Disable the activity mode temperature
      required: false
      advanced: false
      example: true
      selector:
        boolean:
reset_pid_to_physics:
  name: Reset PID to Physics Defaults
  description: >-
    Recalculates PID values from the zone's physical properties (area_m2,
    ceiling_height, heating_type) using physics-based initialization. Also
    clears the integral term to avoid wind-up from previous tuning.
  target:
    entity:
      integration: adaptive_thermostat
      domain: climate
apply_adaptive_pid:
  name: Apply Adaptive PID
  description: >-
    Calculates and applies PID values based on learned performance metrics
    (overshoot, undershoot, settling time, oscillations). Requires at least
    3 analyzed heating cycles. Also clears the integral term to avoid
    wind-up from previous tuning.
  target:
    entity:
      integration: adaptive_thermostat
      domain: climate

# Domain-level services for system-wide operations
run_learning:
  name: Run Learning
  description: >-
    Trigger adaptive learning analysis for all zones. Analyzes heating cycles
    and calculates recommended PID adjustments based on observed performance
    metrics (overshoot, undershoot, settling time, oscillations). Results are
    returned and also logged for review.

apply_recommended_pid:
  name: Apply Recommended PID
  description: Apply the learned/recommended PID values to a specific zone.
  fields:
    entity_id:
      name: Climate Entity
      description: The climate entity to apply PID values to
      required: true
      example: climate.living_room
      selector:
        entity:
          domain: climate

health_check:
  name: Health Check
  description: Run a health check on all zones and send alerts for any issues detected. Checks cycle times, power consumption, and sensor availability.

weekly_report:
  name: Weekly Report
  description: Generate and send a weekly performance report via the configured notification service. Includes duty cycles, energy usage, and zone statistics.

cost_report:
  name: Cost Report
  description: Generate an energy cost report showing consumption and costs for each zone and the total system.
  fields:
    period:
      name: Period
      description: The reporting period (daily, weekly, or monthly)
      required: false
      default: weekly
      example: weekly
      selector:
        select:
          options:
            - daily
            - weekly
            - monthly

set_vacation_mode:
  name: Set Vacation Mode
  description: Enable or disable vacation mode. When enabled, all zones are set to frost protection temperature and learning is paused.
  fields:
    enabled:
      name: Enabled
      description: Whether to enable or disable vacation mode
      required: true
      example: true
      selector:
        boolean:
    target_temp:
      name: Target Temperature
      description: The frost protection temperature to use during vacation (default 12°C)
      required: false
      default: 12
      example: 12
      selector:
        number:
          min: 5
          max: 18
          step: 0.5
          unit_of_measurement: "°C"
          mode: slider
