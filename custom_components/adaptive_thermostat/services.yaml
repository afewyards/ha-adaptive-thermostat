reset_pid_to_physics:
  name: Reset PID to Physics Defaults
  description: >-
    Recalculates PID values from the zone's physical properties (area_m2,
    ceiling_height, heating_type) using physics-based initialization. Also
    clears the integral term to avoid wind-up from previous tuning.
  target:
    entity:
      integration: adaptive_thermostat
      domain: climate

apply_adaptive_pid:
  name: Apply Adaptive PID
  description: >-
    Calculates and applies PID values based on learned performance metrics
    (overshoot, undershoot, settling time, oscillations). Requires at least
    3 analyzed heating cycles. Also clears the integral term to avoid
    wind-up from previous tuning.
  target:
    entity:
      integration: adaptive_thermostat
      domain: climate

clear_learning:
  name: Clear Learning
  description: >-
    Clears all adaptive learning data for the zone and resets PID to physics
    defaults. Use this to start fresh if learned values are not working well.
    Clears cycle history, Ke observations, and resets PID gains.
  target:
    entity:
      integration: adaptive_thermostat
      domain: climate

# Domain-level services for system-wide operations
run_learning:
  name: Run Learning
  description: >-
    Trigger adaptive learning analysis for all zones. Analyzes heating cycles
    and calculates recommended PID adjustments based on observed performance
    metrics (overshoot, undershoot, settling time, oscillations). Results are
    returned and also logged for review.

health_check:
  name: Health Check
  description: Run a health check on all zones and send alerts for any issues detected. Checks cycle times, power consumption, and sensor availability.

weekly_report:
  name: Weekly Report
  description: Generate and send a weekly performance report via the configured notification service. Includes duty cycles, energy usage, and zone statistics.

cost_report:
  name: Cost Report
  description: Generate an energy cost report showing consumption and costs for each zone and the total system.
  fields:
    period:
      name: Period
      description: The reporting period (daily, weekly, or monthly)
      required: false
      default: weekly
      example: weekly
      selector:
        select:
          options:
            - daily
            - weekly
            - monthly

set_vacation_mode:
  name: Set Vacation Mode
  description: Enable or disable vacation mode. When enabled, all zones are set to frost protection temperature and learning is paused.
  fields:
    enabled:
      name: Enabled
      description: Whether to enable or disable vacation mode
      required: true
      example: true
      selector:
        boolean:
    target_temp:
      name: Target Temperature
      description: The frost protection temperature to use during vacation (default 12°C)
      required: false
      default: 12
      example: 12
      selector:
        number:
          min: 5
          max: 18
          step: 0.5
          unit_of_measurement: "°C"
          mode: slider
